# ========================================
# TRAVEL SUPPORT PLATFORM - ENVIRONMENT VARIABLES
# ========================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control!

# ========================================
# SERVER CONFIGURATION
# ========================================
NODE_ENV=development
PORT=3000

# Frontend URL (used for password reset links, CORS, etc.)
FRONTEND_URL=http://localhost:3000

# Domain suffix for tenant subdomains
DOMAIN_SUFFIX=travelapp.co.uk

# ========================================
# DATABASE CONFIGURATION
# ========================================
# PostgreSQL connection settings
DB_HOST=localhost
DB_PORT=5432
DB_NAME=travel_support_dev
DB_USER=postgres
DB_PASSWORD=your_password_here

# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20

# Alternative: Full database URL (Railway, Heroku, etc.)
# DATABASE_URL=postgresql://user:password@host:port/database

# ========================================
# AUTHENTICATION & SECURITY
# ========================================
# JWT secret key (CRITICAL - use a strong random string in production)
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h

# Encryption key for sensitive data (64 character hex string)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your_64_character_hex_encryption_key_here

# ========================================
# EMAIL CONFIGURATION (SMTP)
# ========================================
# Required for password reset emails and tenant registration
# SMTP server settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false

# SMTP authentication
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_specific_password

# For Gmail:
# 1. Enable 2-factor authentication
# 2. Generate app-specific password: https://myaccount.google.com/apppasswords
#
# For other providers:
# - SendGrid: smtp.sendgrid.net (port 587)
# - Mailgun: smtp.mailgun.org (port 587)
# - Amazon SES: email-smtp.region.amazonaws.com (port 587)

# ========================================
# EXTERNAL SERVICES
# ========================================
# Google Maps API key (for address autocomplete and geocoding)
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# Twilio SMS Configuration (for customer messaging)
# Sign up at: https://www.twilio.com/console
# Find your credentials in: Console > Account Info
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890

# For testing, you can use Twilio's test credentials:
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=your_auth_token_here
# TWILIO_PHONE_NUMBER=+15005550006 (Twilio test number)

# ========================================
# ERROR MONITORING & LOGGING
# ========================================
# Sentry DSN for error tracking (optional but recommended for production)
SENTRY_DSN=

# Log level: error, warn, info, http, verbose, debug
LOG_LEVEL=debug

# ========================================
# CACHING (Optional)
# ========================================
# Redis configuration for caching (improves performance)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ========================================
# RATE LIMITING
# ========================================
# Rate limit window in milliseconds (15 minutes = 900000ms)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Auth-specific rate limiting (stricter for login endpoints)
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# ========================================
# SYSTEM CONFIGURATION
# ========================================
# System timezone (affects date/time handling)
SYSTEM_TIMEZONE=Europe/London

# ========================================
# PRODUCTION SECURITY SETTINGS
# ========================================
# Enable these settings in production

# Force HTTPS redirection (uncomment in production)
# FORCE_HTTPS=true

# Database SSL connection (REQUIRED in production)
# DB_SSL=true
# DB_SSL_REJECT_UNAUTHORIZED=true  # Set to true with valid SSL certificate

# Secure cookies (REQUIRED in production)
# COOKIE_SECURE=true
# COOKIE_HTTPONLY=true
# COOKIE_SAMESITE=strict

# Session secret (generate with: openssl rand -hex 32)
# SESSION_SECRET=*** REQUIRED FOR PRODUCTION ***

# Content Security Policy (production domains)
# CSP_SCRIPT_SRC='self'
# CSP_STYLE_SRC='self' 'unsafe-inline'

# CORS allowed origins (comma-separated, production domains)
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ========================================
# LICENSE & COMPLIANCE (Optional)
# ========================================
# Software license key (if distributing to customers)
# LICENSE_KEY=
# CUSTOMER_ID=
# LICENSE_PUBLIC_KEY=

# ========================================
# FILE UPLOAD SECURITY
# ========================================
# Maximum file upload size in bytes (10MB default)
MAX_FILE_SIZE=10485760

# Allowed file extensions (comma-separated)
# ALLOWED_FILE_EXTENSIONS=.pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png

# ========================================
# FEATURE FLAGS
# ========================================
# Enable/disable features for production

# Enable Swagger API documentation (disable in production)
ENABLE_SWAGGER_DOCS=true

# Enable debug mode (disable in production)
ENABLE_DEBUG_MODE=false

# Enable source maps (disable in production)
ENABLE_SOURCE_MAPS=false

# ========================================
# AI FEATURES (OPTIONAL - All Disabled by Default)
# ========================================
# Master switch for all AI features
# System works perfectly without AI - these are optional enhancements
AI_FEATURES_ENABLED=false

# Individual AI Feature Toggles
# Route optimization using Google OR-Tools or similar
AI_ROUTE_OPTIMIZATION=false
AI_ROUTE_PROVIDER=standard
AI_ROUTE_MAX_COMPUTE_MS=5000

# Demand forecasting for resource planning
AI_DEMAND_FORECASTING=false
AI_FORECAST_HISTORY_DAYS=90
AI_FORECAST_DAYS=30

# Predictive maintenance for vehicles
AI_PREDICTIVE_MAINTENANCE=false
AI_MAINTENANCE_MIN_DATA=10
AI_MAINTENANCE_CONFIDENCE=0.7

# No-show prediction
AI_NOSHOW_PREDICTION=false
AI_NOSHOW_THRESHOLD=70
AI_NOSHOW_MIN_HISTORY=5

# AI Service URLs (optional)
# Python AI microservice for ML models (if using)
AI_SERVICE_URL=

# OpenAI API (optional, for experimental features)
OPENAI_API_KEY=

# AI Budget Controls
# Maximum daily spend on AI services (USD)
AI_MAX_DAILY_COST=10
# Alert when budget reaches this percentage
AI_BUDGET_ALERT_THRESHOLD=80

# ========================================
# AI FEATURE NOTES
# ========================================
# 1. All AI features have fallback to rule-based systems
# 2. System works perfectly with all AI features disabled
# 3. Budget limits prevent runaway costs
# 4. See documentation for implementation details
# 5. No customer-facing AI (chatbots etc) - operational efficiency only
